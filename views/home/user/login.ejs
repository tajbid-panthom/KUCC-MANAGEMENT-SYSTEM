<% layout("/layouts/boilerplate.ejs") %>

<section
  class="login-section d-flex align-items-center justify-content-center py-5 min-vh-100 bg-light"
  style="background: linear-gradient(to bottom, #00b4d8, #caf0f8)"
>
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-6 col-lg-5 col-xl-4">
        <div
          class="text-center mb-4 d-flex align-items-center just-content-center text-center"
        >
          <div
            class="d-inline-block bg-white p-3 rounded-circle shadow-sm mb-2 mx-4"
          >
            <img
              src="/images/logo.jpg"
              alt="Club Logo"
              width="60"
              height="60"
            />
          </div>
          <h2 class="fw-bold h4 mb-1" style="color: #fff">
            Khulna University <br />Career Club
          </h2>
        </div>

        <div class="card border-0 shadow-sm rounded-3">
          <div class="card-body p-4 p-md-5">
            <form
              action="/login"
              method="POST"
              class="needs-validation"
              novalidate
            >
              <div class="mb-3">
                <label for="loginEmail" class="form-label small fw-medium"
                  >Email:</label
                >
                <div class="input-group">
                  <input
                    type="email"
                    class="form-control form-control-lg bg-light border-0"
                    id="loginEmail"
                    name="email"
                    placeholder="info@gmail.com"
                    required
                    style="padding-right: 3rem"
                  />
                  <span
                    class="position-absolute end-0 top-50 translate-middle-y pe-3"
                  >
                    <i class="bi bi-envelope-fill text-secondary"></i>
                  </span>
                  <div class="invalid-feedback">
                    Please enter a valid email.
                  </div>
                </div>
              </div>

              <div class="mb-2 position-relative">
                <label for="loginPassword" class="form-label small fw-medium"
                  >Password:</label
                >
                <div class="input-group">
                  <input
                    type="password"
                    class="form-control form-control-lg bg-light border-0 password-input"
                    id="loginPassword"
                    name="password"
                    placeholder="********"
                    required
                    style="padding-right: 3rem"
                  />
                  <span
                    class="position-absolute end-0 top-50 translate-middle-y pe-3 toggle-password cursor-pointer"
                  >
                    <i class="bi bi-eye-fill text-secondary"></i>
                  </span>
                  <div class="invalid-feedback">
                    Please enter your password.
                  </div>
                </div>
              </div>
              <% if (global.shared.error === 'invalid') { %>
              <div class="alert alert-danger" role="alert">
                Invalid email or password.
              </div>
              <% } %>

              <div class="text-end mb-3">
                <a href="/forgot-password" class="small text-decoration-none"
                  >Forgot Password?</a
                >
              </div>

              <div class="d-grid mb-3">
                <button
                  type="submit"
                  class="btn btn-primary btn-lg fw-medium rounded"
                  style="background-color: #4267b2; border-color: #4267b2"
                >
                  Login
                </button>
              </div>

              <div class="d-flex align-items-center my-3">
                <hr class="flex-grow-1" />
                <span class="mx-2 small text-muted text-uppercase">OR</span>
                <hr class="flex-grow-1" />
              </div>

              <div class="d-grid">
                <a
                  href="/signup"
                  class="btn btn-light btn-lg fw-medium rounded border"
                  >Join Us</a
                >
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<script>
  document.querySelectorAll(".toggle-password").forEach(function (icon) {
    icon.addEventListener("click", function () {
      // Find the associated password input
      const input = this.parentElement.querySelector(".password-input");

      // Toggle between 'password' and 'text' type
      const type =
        input.getAttribute("type") === "password" ? "text" : "password";
      input.setAttribute("type", type);

      // Toggle eye icon (Bootstrap Icons)
      const eyeIcon = this.querySelector("i");
      if (type === "password") {
        eyeIcon.classList.remove("bi-eye-slash-fill");
        eyeIcon.classList.add("bi-eye-fill");
      } else {
        eyeIcon.classList.remove("bi-eye-fill");
        eyeIcon.classList.add("bi-eye-slash-fill");
      }
    });
  });
</script>
